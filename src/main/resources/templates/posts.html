<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Discussion Forum - Posts</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/posts.css}">
</head>
<body>
    <div class="header">
        <h1>Discussion Forum</h1>
        <div>
            Welcome, <span th:text="${username}">username</span>!
            <a th:href="@{/logout}" class="btn">Logout</a>
        </div>
    </div>
    
    <div class="container">
        <div style="margin-bottom: 20px; text-align: right;">
            <a th:href="@{/posts/new}" class="btn btn-new">Create New Post</a>
        </div>
        
        <div th:if="${#lists.isEmpty(posts)}" class="empty-message">
            No posts yet. Be the first to create one!
        </div>
        
        <div th:unless="${#lists.isEmpty(posts)}">
            <div th:each="post : ${posts}" class="post-card">
                <h2 class="post-title" th:text="${post.title}">Post Title</h2>
                <div class="post-author" th:text="'By ' + ${post.author} + ' on ' + ${post.createdTimeFormatted}">Author and date</div>
                <div class="post-content">
                    <span th:if="${#strings.length(post.content) > 200}" th:text="${#strings.substring(post.content, 0, 200)} + '...'"></span>
                    <span th:unless="${#strings.length(post.content) > 200}" th:text="${post.content}"></span>
                </div>
                <div class="post-meta">
                    <span th:text="${post.commentsSize} + ' comments'">comments count</span>
                    <a th:href="@{/posts/view/{id}(id=${post.id})}" class="btn btn-view">View Post</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>